<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>OPENAPI示例</title>
	<style type="text/css">
		a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}html{color:#3f3f3f}:focus{outline:0}blockquote,body,button,code,dd,div,dl,dt,fieldset,form,h1,h2,h3,h4,h5,h6,input,legend,li,ol,p,pre,select,td,textarea,th,ul{margin:0;padding:0;line-height:1;-webkit-tap-highlight-color:transparent}body{margin:auto;max-width:45pc;font-size:16px;font-family:PingFang SC,Arial,Microsoft YaHei}body,html{background-color:#eaeff3;text-align: center;}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}a:-webkit-any-link{color:#303030;text-decoration:none}address,caption,cite,code,dfn,em,strong,th,var{font-weight:400;font-style:normal}ol,ul{list-style:none}li{display:block}.ellipsis-1l,.ellipsis-2l,.ellipsis-3l{display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-weight:400;font-size:100%}q:after,q:before{content:""}abbr,acronym{border:0;font-variant:normal}sup{vertical-align:text-top}sub{vertical-align:text-bottom}input,select,textarea{border:none;border-radius:0;font-weight:inherit;font-size:inherit;font-family:inherit;-moz-appearance:none;appearance:none;-webkit-appearance:none}button{border:none;background:0 0}.border-b{position:relative}.border-b:after{position:absolute;content:"";width:100%;height:0;border-top:1px solid #d6d6d6;left:0;bottom:0}.border-t{position:relative}.border-t:after{position:absolute;content:"";width:100%;height:0;left:0;top:0;border-top:1px solid #d6d6d6}.border-l{position:relative}.border-l:after{position:absolute;content:"";width:0;height:100%;border-left:1px solid #d6d6d6;left:0;top:0}.border-r{position:relative}.border-r:after{position:absolute;content:"";width:0;height:100%;border-left:1px solid #d6d6d6;right:0;top:0}html[data-dpr="2"] .border-b:after,html[data-dpr="2"] .border-t:after{-webkit-transform:scaleY(.5);transform:scaleY(.5)}html[data-dpr="2"] .border-l:after,html[data-dpr="2"] .border-r:after{-webkit-transform:scaleX(.5);transform:scaleX(.5)}html[data-dpr="3"] .border-b:after,html[data-dpr="3"] .border-t:after{-webkit-transform:scaleY(.3);transform:scaleY(.3)}html[data-dpr="3"] .border-l:after,html[data-dpr="3"] .border-r:after{-webkit-transform:scaleX(.3);transform:scaleX(.3)}*,:after,:before{box-sizing:border-box}.mgb10{margin-bottom:10px}.pd10{padding:0 10px}.clearfix:after{content:" ";display:block;height:0;clear:both}.align-l{text-align:left}.align-r{text-align:right}.flex{display:-webkit-box;display:-ms-flexbox;display:flex}.flex-column{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.flex-center{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.flex-warp{-ms-flex-wrap:wrap;flex-wrap:wrap}.flex-full{-webkit-box-flex:1;-ms-flex:1;flex:1}.flex-between{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.ellipsis{white-space:nowrap}.ellipsis,.ellipsis-2l{overflow:hidden;text-overflow:ellipsis}.ellipsis-2l{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.yun-button{outline:none;border:none;text-shadow:none;background:transparent;overflow:hidden;width:100%;height:44px;line-height:44px;border-radius:22px;padding:0;font-size:16px;text-align:center;color:#fff;background-color:#3cbaff}.yun-button-normal{background-color:#3cbaff}.yun-button-linear{border:1px solid #b9c7d2;color:#98a1a8;background-color:#fff}.yun-button-linear:active{background:#f3f4f5}.yun-button-small{width:auto;height:28px;line-height:28px;border-radius:14px;padding:0 12px;font-size:12px}.yun-button-middle{width:auto;height:35px;line-height:35px;border-radius:17.5px;padding:0 44px;font-size:14px}.yun-button-large{width:100%;height:44px;line-height:44px;border-radius:22px;padding:0;font-size:16px}.yun-button.is-disabled{color:#98a1a8;background:#dce1e7}.yun-button:not(.is-disable):active{opacity:.5}.middleCenter,.yun-toast-container{top:50%;left:50%;transform-origin:50% 50%;transform:translate(-50%,-50%);-webkit-transform-origin:50% 50%;-webkit-transform:translate(-50%,-50%);-moz-transform-origin:50% 50%;-moz-transform:translate(-50%,-50%);-ms-transform-origin:50% 50%;-ms-transform:translate(-50%,-50%)}.yun-toast-container{position:fixed;display:block;width:80px;padding:12px 0;z-index:1;text-align:center;color:#fff;overflow:hidden;background-color:rgba(12,33,63,.8);border-radius:8px}.yun-toast-icon{position:relative;width:40px;height:40px;margin:0 auto}.yun-toast-icon img{width:100%;height:auto}.yun-toast-content{padding-top:6px;font-size:12px}.is-loading-bottom{width:auto;top:auto;padding:7px 24px;bottom:24px;border-radius:24px}.is-loading-bottom .yun-toast-content{padding-top:0}.openapi{padding:15px;background:#fff;text-align:left}.openapi h3{margin-bottom:8px;padding-top:10px;font-size:16px;font-weight:400;color:#3e3e3e;position:relative}.openapi .desc{font-size:14px;font-weight:400;margin-bottom:10px;line-height:1.2em;color:#8d8c92}.openapi button{border-radius:5px}.toast{position: fixed;z-index: 100;top:50%;left: 50%;background: rgba(0,0,0,.7);border-radius: 6px;transform: translate(-50%,-50%);color: #fff;line-height: 2;padding:0 10px;}
	</style></head>
<script src="./lib/axios.min.js"></script>
<script src="./lib/vue.min.js"></script> 
<script src="./lib/util.js?k=5"></script>
<body>
    <div class="openapi" id="app"> 
    	
    	 <h3>添加记录</h3>
        <p class="desc">
            
        </p>
        <button class="mgb10 yun-button yun-button-normal yun-button-large" v-on:click="getapi('addrecord')">addrecord</button> 
    	
    
        <h3>获取个人信息</h3>
        <p class="desc">
            https://open.yunzhijia.com/openapi/third/v1/opendata-control/data/getperson
        </p>
        <button class="mgb10 yun-button yun-button-normal yun-button-large" v-on:click="getapi('getperson')">getperson</button> 
   
        <h3>获取当前部门成员、部门负责人信息</h3>
        <p class="desc">
            https://open.yunzhijia.com/openapi/third/v1/opendata-control/data/getorgpersons
        </p>
        <button class="mgb10 yun-button yun-button-normal yun-button-large" v-on:click="getapi('getorgpersons')">getorgpersons</button> 
   
         <h3>获取企业基本信息</h3>
        <p class="desc">
            https://open.yunzhijia.com/openapi/third/v1/opendata-control/data/getcompany
        </p>
        <button class="mgb10 yun-button yun-button-normal yun-button-large" v-on:click="getapi('getcompany')">getcompany</button> 
   
        <h3>获取所有部门列表</h3>
        <p class="desc">
            https://open.yunzhijia.com/openapi/third/v1/opendata-control/data/getallorgs
        </p>
        <button class="mgb10 yun-button yun-button-normal yun-button-large" v-on:click="getapi('getallorgs')">getallorgs</button> 
   
        <h3>获取当前部门基本信息，部门负责人</h3>
        <p class="desc">
            https://open.yunzhijia.com/openapi/third/v1/opendata-control/data/getorg
        </p>
        <button class="mgb10 yun-button yun-button-normal yun-button-large" v-on:click="getapi('getorg')">getorg</button> 
         <p class="desc">
            更多接口示例可访问开放平台网站查看
        </p>  
     </div>
<script type="text/javascript">
        var app = new Vue({
            el: '#app',  
            data:{
                appId: util.getLocalData('demoappId') ? util.getLocalData('demoappId') : 0,
                ticket: util.getLocalData('demoticket') ? util.getLocalData('demoticket') : ''
            },          
            methods:{       
                getapi:function(reqname){
                    var _self = this;
                    var params = new URLSearchParams();
                    params.append('reqName', reqname);
                    params.append('appId', _self.appId);
                    params.append('ticket', _self.ticket);
                    this.$axios.post('', params
                    ).then(function(res){
                        if(res.data.success){
                            alert(JSON.stringify(res.data))
                        } else{                            
                            _self.$toast({
                                content:res.data.error
                            }) 
                        } 
                    })                
                }
            }
        })
</script></body>
</html>